<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.2">
<meta name="author" content="Eclipse Krazo committers and contributors">
<title>Eclipse Krazo: Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement when using as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Eclipse Krazo: Documentation</h1>
<div class="details">
<span id="author" class="author">Eclipse Krazo committers and contributors</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#_quickstart">2. Quickstart</a>
<ul class="sectlevel2">
<li><a href="#_basic_setup">2.1. Basic setup</a>
<ul class="sectlevel3">
<li><a href="#_jakarta_ee">2.1.1. Jakarta EE</a></li>
<li><a href="#_servlet_containers">2.1.2. Servlet Containers</a></li>
</ul>
</li>
<li><a href="#_required_dependencies">2.2. Required dependencies</a></li>
<li><a href="#_configuration_files">2.3. Configuration files</a>
<ul class="sectlevel3">
<li><a href="#_mixed_configuration_with_applicationgetclasses_and_jakarta_rest_auto_discovery">2.3.1. Mixed configuration with Application#getClasses and Jakarta REST auto discovery</a></li>
</ul>
</li>
<li><a href="#_creating_you_first_controller">2.4. Creating you first controller</a></li>
</ul>
</li>
<li><a href="#_configuration">3. Configuration</a>
<ul class="sectlevel2">
<li><a href="#_csrf">3.1. CSRF</a>
<ul class="sectlevel3">
<li><a href="#_csrf_csrf_protection_jakarta_mvc_security_csrfprotection">3.1.1. Csrf.CSRF_PROTECTION (jakarta.mvc.security.CsrfProtection)</a></li>
<li><a href="#_csrf_csrf_header_name_jakarta_mvc_security_csrfheadername">3.1.2. Csrf.CSRF_HEADER_NAME (jakarta.mvc.security.CsrfHeaderName)</a></li>
<li><a href="#_properties_csrf_token_strategy_org_eclipse_krazo_csrftokenstrategy">3.1.3. Properties.CSRF_TOKEN_STRATEGY (org.eclipse.krazo.csrfTokenStrategy)</a></li>
</ul>
</li>
<li><a href="#_views">3.2. Views</a>
<ul class="sectlevel3">
<li><a href="#_properties_redirect_scope_cookies_org_eclipse_krazo_redirectscopecookies">3.2.1. Properties.REDIRECT_SCOPE_COOKIES (org.eclipse.krazo.redirectScopeCookies)</a></li>
<li><a href="#_properties_redirect_scope_cookie_name_org_eclipse_krazo_redirectscopecookiename">3.2.2. Properties.REDIRECT_SCOPE_COOKIE_NAME (org.eclipse.krazo.redirectScopeCookieName)</a></li>
<li><a href="#_properties_redirect_scope_query_param_name_org_eclipse_krazo_redirectscopequeryparamname">3.2.3. Properties.REDIRECT_SCOPE_QUERY_PARAM_NAME (org.eclipse.krazo.redirectScopeQueryParamName)</a></li>
<li><a href="#_properties_default_view_file_extension_org_eclipse_krazo_defaultviewfileextension">3.2.4. Properties.DEFAULT_VIEW_FILE_EXTENSION (org.eclipse.krazo.defaultViewFileExtension)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_view_engines">4. View Engines</a>
<ul class="sectlevel2">
<li><a href="#_jsp_view_engine">4.1. JSP view engine</a></li>
<li><a href="#_jsf_view_engine">4.2. JSF view engine</a></li>
</ul>
</li>
<li><a href="#_advanced_features">5. Advanced Features</a>
<ul class="sectlevel2">
<li><a href="#_overwrite_http_method_in_form_submissions">5.1. Overwrite HTTP method in form submissions</a>
<ul class="sectlevel3">
<li><a href="#_migrating_from_legacy_org_eclipse_krazo_forms_hiddenmethodfilter_to_org_eclipse_krazo_forms_formmethodoverwritefilter">5.1.1. Migrating from legacy <code>org.eclipse.krazo.forms.HiddenMethodFilter</code> to <code>org.eclipse.krazo.forms.FormMethodOverwriteFilter</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_writing_extensions">6. Writing Extensions</a>
<ul class="sectlevel2">
<li><a href="#_add_type_converters">6.1. Add type converters</a></li>
<li><a href="#_add_features_to_jakarta_restful_web_services">6.2. Add features to Jakarta RESTful Web Services</a></li>
<li><a href="#_unwrap_http_communication_for_different_servers">6.3. Unwrap HTTP communication for different servers</a></li>
<li><a href="#_custom_behavior_for_form_handling_during_csrf_validation">6.4. Custom behavior for form handling during CSRF validation</a></li>
<li><a href="#_creating_your_own_view_engine">6.5. Creating your own view engine</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Eclipse Krazo is an implementation of action-based MVC specified by Jakarta MVC.
It builds on top of Jakarta RESTful Web Services (former JAX-RS; abbreviated with Jakarta REST inside this documentation)  and currently contains support for RESTEasy and Jersey
with a well-defined SPI for other implementations.</p>
</div>
<div class="paragraph">
<p>This is the user guide for Eclipse Krazo 3.0.0-SNAPSHOT. We are trying to keep it up to date with the current features. Please note, that this guide assumes that the examples are, if not specified otherwise, targeting a Jakarta EE 10 environment.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quickstart">2. Quickstart</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to set up Eclipse Krazo.</p>
</div>
<div class="sect2">
<h3 id="_basic_setup">2.1. Basic setup</h3>
<div class="paragraph">
<p>The required steps to set up Eclipse Krazo depends on your environment. The easiest way is to
use a Jakarta EE environment, because in this case the server already provides all the
prerequisites.</p>
</div>
<div class="sect3">
<h4 id="_jakarta_ee">2.1.1. Jakarta EE</h4>
<div class="paragraph">
<p>The easiest way getting started with Eclipse Krazo is to generate a Jakarta EE project with our
archetype. This archetype generates a simple project including the Jakarta EE Web Profile and the selected,
server-specific Krazo implementation.</p>
</div>
<div class="paragraph">
<p>This archetype comes with the following setups:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java EE 8 / Jakarta EE 8: MVC 1.0, Krazo 1.1.0</p>
</li>
<li>
<p>Jakarta EE 9: MVC 2.0, Krazo 2.0.x</p>
</li>
<li>
<p>Jakarta EE 10: MVC 2.1, Krazo 3.0.0</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please note that since Krazo 3.0.0 the name of the archetype changed. Before this release, all archetypes contained the target Jakarta EE release in their names which led to confusing versioning. Since Krazo 3.0.0 the archetype targets the same Jakarta EE release than Krazo and the corresponding Jakarta MVC API.</p>
</div>
<div class="sect4">
<h5 id="_how_to_use_the_archetype">How to use the archetype</h5>
<div class="paragraph">
<p>The usage of the archetype is really easy. Depending on your application server, just run one of these commands in your command line.</p>
</div>
<div class="sect5">
<h6 id="_glassfish_payara_jersey_since_krazo_3_0_0">Glassfish / Payara (Jersey) (since Krazo 3.0.0)</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">mvn archetype:generate \
-DarchetypeGroupId=org.eclipse.krazo \
-DarchetypeArtifactId=krazo-jakartaee-archetype \
-DarchetypeVersion=KRAZO VERSION  \
-DgroupId=YOUR GROUP ID\
-DartifactId=YOUR ARTIFACT ID</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_wildfly_resteasy_openliberty_21_x_since_krazo_3_0_0">Wildfly (RESTEasy) / OpenLiberty &gt;= 21.x (since Krazo 3.0.0)</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">mvn archetype:generate \
-DarchetypeGroupId=org.eclipse.krazo \
-DarchetypeArtifactId=krazo-jakartaee-archetype \
-DarchetypeVersion=KRAZO VERSION \
-DgroupId=YOUR GROUP ID \
-DartifactId=YOUR ARTIFACT ID \
-DkrazoImpl=resteasy</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_glassfish_payara_jersey_before_krazo_3_0_0">Glassfish / Payara (Jersey) (before Krazo 3.0.0)</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">mvn archetype:generate \
-DarchetypeGroupId=org.eclipse.krazo \
-DarchetypeArtifactId=krazo-jakartaee[8|9]-archetype \
-DarchetypeVersion=[1.1.0 | 2.0.x]  \
-DgroupId=YOUR GROUP ID\
-DartifactId=YOUR ARTIFACT ID</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_wildfly_resteasy_openliberty_21_x_before_krazo_3_0_0">Wildfly (RESTEasy) / OpenLiberty &gt;= 21.x (before Krazo 3.0.0)</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">mvn archetype:generate \
-DarchetypeGroupId=org.eclipse.krazo \
-DarchetypeArtifactId=krazo-jakartaee[8|9]-archetype \
-DarchetypeVersion=[1.1.0 | 2.0.x] \
-DgroupId=YOUR GROUP ID \
-DartifactId=YOUR ARTIFACT ID \
-DkrazoImpl=resteasy</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_tomee_openliberty_cxf">TomEE / OpenLiberty (CXF)</h6>
<div class="paragraph">
<p>Krazo won&#8217;t support CXF anymore. As OpenLiberty is going to switch to RESTEasy until it supports Jakarta REST Web Services 3.0, this change is only relevant for TomEE in general and older versions of OpenLiberty.</p>
</div>
<div class="paragraph">
<p>To use Krazo on those servers anyway, you can add Jersey or RESTEasy as a compile time dependency to your artifact/</p>
</div>
</div>
<div class="sect5">
<h6 id="_glassfishpayara">Glassfish/Payara</h6>
<div class="paragraph">
<p>Glassfish comes with Jersey as its Jakarta REST implementation. Please add the following dependencies to your
application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;jakarta.mvc&lt;/groupId&gt;
        &lt;artifactId&gt;jakarta.mvc-api&lt;/artifactId&gt;
        &lt;version&gt;{{versions.spec.latest}}&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.eclipse.krazo&lt;/groupId&gt;
        &lt;artifactId&gt;krazo-jersey&lt;/artifactId&gt;
        &lt;version&gt;{{versions.krazo.latest}}&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!-- other dependencies ... --&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_wildfly_jboss_eap_and_openliberty_21_x">Wildfly, JBoss EAP and OpenLiberty &gt;= 21.x</h6>
<div class="paragraph">
<p>Wildfly is using RESTEasy for Jakarta REST. So you need the Eclipse Krazo RESTEasy integration module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;jakarta.mvc&lt;/groupId&gt;
        &lt;artifactId&gt;jakarta.mvc-api&lt;/artifactId&gt;
        &lt;version&gt;{{versions.spec.latest}}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.eclipse.krazo&lt;/groupId&gt;
        &lt;artifactId&gt;krazo-resteasy&lt;/artifactId&gt;
        &lt;version&gt;{{versions.krazo.latest}}&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!-- other dependencies ... --&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_thorntail">Thorntail</h6>
<div class="paragraph">
<p>Since version 2.7.0, Thorntail provides a stable fraction for MVC with Krazo. For older versions of Thorntail you can use the Jakarta REST fraction and add
the same dependencies as required for WildFly.</p>
</div>
<div class="paragraph">
<p>Please note, that Thorntail <a href="https://thorntail.io/posts/the-end-of-an-era/">reached end of life</a> and therefore the MVC fraction won&#8217;t receive updates anymore.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_servlet_containers">2.1.2. Servlet Containers</h4>
<div class="paragraph">
<p>The simplest way to get started with MVC is to deploy your app to a JavaEE 8 application server.
In this setup the application server will provide Jakarta REST, CDI and Bean Validation implementations
for you. However, there is a large number of users who prefer to run their applications on plain Servlet containers
like Apache Tomcat and Jetty. In this setup you will have to provide Jakarta REST, CDI and Bean Validations
yourself.</p>
</div>
<div class="paragraph">
<p>The following steps will show you how to run Eclipse Krazo on Apache Tomcat using Weld, Jersey and Hibernate Validator (used by Jersey Bean Validation).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_required_dependencies">2.2. Required dependencies</h3>
<div class="paragraph">
<p>The following <code>pom.xml</code> example shows the dependency configuration for your application. Please use the corresponding versions according to the Jakarta EE platform you target.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;jakarta.ws.rs&lt;/groupId&gt;
        &lt;artifactId&gt;jakarta.ws.rs-api&lt;/artifactId&gt;
        &lt;scope&gt;compile&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;
        &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;
        &lt;artifactId&gt;jersey-common&lt;/artifactId&gt;
        &lt;scope&gt;compile&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;
        &lt;artifactId&gt;jersey-container-servlet&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;
        &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;jakarta.validation&lt;/groupId&gt;
        &lt;artifactId&gt;jakarta.validation-api&lt;/artifactId&gt;
        &lt;scope&gt;compile&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.glassfish.jersey.ext&lt;/groupId&gt;
        &lt;artifactId&gt;jersey-bean-validation&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;jakarta.enterprise&lt;/groupId&gt;
        &lt;artifactId&gt;jakarta.enterprise.cdi-api&lt;/artifactId&gt;
        &lt;scope&gt;compile&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.weld.servlet&lt;/groupId&gt;
        &lt;artifactId&gt;weld-servlet-core&lt;/artifactId&gt;
        &lt;scope&gt;compile&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.glassfish.jersey.ext.cdi&lt;/groupId&gt;
        &lt;artifactId&gt;jersey-cdi1x-servlet&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.eclipse.krazo&lt;/groupId&gt;
        &lt;artifactId&gt;krazo-jersey&lt;/artifactId&gt;
        &lt;version&gt;${krazo.version}&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_files">2.3. Configuration files</h3>
<div class="paragraph">
<p>Make sure to add an empty <code>beans.xml</code> file in your <code>/src/main/webapp/WEB-INF</code> folder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;?xml version="1.0"?&gt;
&lt;beans xmlns="https://jakarta.ee/xml/ns/jakartaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/beans_4_0.xsd"
       version="4.0"&gt;

&lt;/beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please note, that the default <code>bean-discovery-mode</code> changed to <code>annotated</code> in CDI 4.0. In case you want to use the old behavior, set the <code>bean-discovery-mode</code> to <code>all</code> in the <code>beans.xml</code></p>
</div>
<div class="paragraph">
<p>The next file to create is called <code>web.xml</code> and should be placed in the <code>src/main/webapp/WEB-INF</code> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns="https://jakarta.ee/xml/ns/jakartaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd"
         version="5.0" metadata-complete="true"&gt;

&lt;/web-app&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The attribute <code>metadata-complete</code> isn&#8217;t madantory, but <a href="https://issues.jboss.org/browse/RESTEASY-2289">helps to prevent Krazo starting twice on RESTEasy</a></p>
</div>
<div class="sect3">
<h4 id="_mixed_configuration_with_applicationgetclasses_and_jakarta_rest_auto_discovery">2.3.1. Mixed configuration with Application#getClasses and Jakarta REST auto discovery</h4>
<div class="paragraph">
<p>As an alternative to the resource auto-discovery of Jakarta REST, someone can use <code>Application#getClasses</code> to configure
endpoints or other providers. Unfortunately, this disables the auto-discovery of Jakarta REST completely, which leads to
not loaded Krazo classes and errors or misbehavior during runtime. In case you want to use the manual approach together
with Eclipse Krazo, you have to consider following configurations.</p>
</div>
<div class="sect4">
<h5 id="_resteasy_and_jersey">RESTEasy and Jersey</h5>
<div class="paragraph">
<p>You don&#8217;t need additional configuration, as Krazo is auto-loaded by implementation-specific SPIs.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_you_first_controller">2.4. Creating you first controller</h3>
<div class="paragraph">
<p>The following steps will show you how to create your first Controller using Eclipse Krazo. It assumes, that you&#8217;ve set up a project like we described before.</p>
</div>
<div class="paragraph">
<p>The first step is to create an Application class, which serves as root resource for our Controllers. The Application class extends from Jakarta REST <code>Application</code> and provides
the base path of our application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import jakarta.ws.rs.Application;
import jakarta.ws.rs.core.Application;

@Application("mvc")
public class MyApplication extends Application {

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please note that, according to the MVC specification, it is not recommended to use an empty application path, as this can lead to problems during request handling when using servlets and MVC resources in parallel or whenyou try to access a stylesheet served by the servlet container via <code>src/main/webapp</code>.</p>
</div>
<div class="paragraph">
<p>After we created the Application class, we need to add our Controller. Therefore, you need to add a simple Jakarta REST resource and decorate it with the <code>jakarta.mvc.Controller</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("hello")
public class HelloController {

    @GET
    @Controller
    public String hello() {
        return "hello.jsp";
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you should see the content of <code>hello.jsp</code> when you access the URI <code>/mvc/hello</code> in your browser.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">3. Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how you can configure your MVC application by overwriting properties inside the Jakarta REST Application class.
For example, you can overwrite an exemplary property <code>foo</code> inside the Application like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class MyApplication extends Application {

    @Override
    public Map&lt;String, Object&gt; getProperties() {
        final Map&lt;String, Object&gt; props = new HashSet&lt;&gt;();

        props.put("foo", "bar");

        return props;
    }
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_csrf">3.1. CSRF</h3>
<div class="paragraph">
<p>For the usage of CSRF, the MVC API and Krazo provide different properties to customize its behavior.</p>
</div>
<div class="sect3">
<h4 id="_csrf_csrf_protection_jakarta_mvc_security_csrfprotection">3.1.1. Csrf.CSRF_PROTECTION (jakarta.mvc.security.CsrfProtection)</h4>
<div class="paragraph">
<p>By default, the CSRF protection for MVC resources is set to <code>Csrf.CsrfOptions#EXPLICIT</code>, which means, that you&#8217;re required to set the <code>@CsrfProtected</code> annotation over a Controller method annotated with <code>@POST</code>, <code>@PUT</code>, <code>@PATCH</code> or <code>@DELETE</code>.
In case you want to use CSRF protection in all methods annotated with one of these HTTP verbs, you can set the property <code>jakarta.mvc.security.CsrfProtection</code> to <code>CsrfOptions#IMPLICIT</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import jakarta.mvc.security.Csrf;
import jakarta.mvc.security.Csrf.CsrfOptions;

public class MyApplication extends Application {

    @Override
    public Map&lt;String, Object&gt; getProperties() {
        final Map&lt;String, Object&gt; props = new HashSet&lt;&gt;();

        props.put(Csrf.CSRF_PROTECTION, CsrfOptions.IMPLICIT);

        return props;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Although, you might want to disable CSRF protection completely for you application.
Therefore exists the <code>CsrfOptions#OFF</code> value, which can be set like the
<code>CsrfOptions#IMPLICIT</code> value in the example above.</p>
</div>
</div>
<div class="sect3">
<h4 id="_csrf_csrf_header_name_jakarta_mvc_security_csrfheadername">3.1.2. Csrf.CSRF_HEADER_NAME (jakarta.mvc.security.CsrfHeaderName)</h4>
<div class="paragraph">
<p>Sometimes you may want to set a custom value for the header transporting the CSRF token.
For this task you can use the property <code>jakarta.mvc.security.CsrfHeaderName</code> or its constant <code>Csrf.CSRF_PROTECTION</code>.
Overwriting this property will change the default name of the HTTP header from <code>X-CSRF-TOKEN</code> to any valid HTTP header name.
The property can be changed like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import jakarta.mvc.security.Csrf;
import jakarta.mvc.security.Csrf.CsrfOptions;

public class MyApplication extends Application {

    @Override
    public Map&lt;String, Object&gt; getProperties() {
        final Map&lt;String, Object&gt; props = new HashSet&lt;&gt;();

        props.put(Csrf.CSRF_HEADER_NAME, "X-CUSTOM-CSRF-HEADER");

        return props;
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_properties_csrf_token_strategy_org_eclipse_krazo_csrftokenstrategy">3.1.3. Properties.CSRF_TOKEN_STRATEGY (org.eclipse.krazo.csrfTokenStrategy)</h4>
<div class="paragraph">
<p>To generate CSRF tokens, Krazo provides two mechanisms by default: a cookie-based and a session-based algorithm, where the session-based is set as default.
In case you want to change the strategy or even want to use some custom one, you can change the used strategy with the <code>org.eclipse.krazo.csrfTokenStrategy</code> property.
For example, you can switch to the cookie-based token strategy by using this setting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import org.eclipse.krazo.Properties;
import org.eclipse.krazo.security.CsrfTokenStrategy;

public class MyApplication extends Application {

    @Override
    public Map&lt;String, Object&gt; getProperties() {
        final Map&lt;String, Object&gt; props = new HashSet&lt;&gt;();

        props.put(Properties.CSRF_TOKEN_STRATEGY, CookieCsrfTokenStrategy.Builder.build());

        return props;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>org.eclipse.krazo.security.CookieCsrfTokenStrategy</code> can be customized via its <code>Builder</code>, but that isn&#8217;t in the scope of this documentation.
Please have a look into the JavaDoc for this.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_views">3.2. Views</h3>
<div class="paragraph">
<p>Eclipse Krazo provides some configuration properties, where someone can customize the behavior of the view handling.
These configurations will be described in the following sections.</p>
</div>
<div class="sect3">
<h4 id="_properties_redirect_scope_cookies_org_eclipse_krazo_redirectscopecookies">3.2.1. Properties.REDIRECT_SCOPE_COOKIES (org.eclipse.krazo.redirectScopeCookies)</h4>
<div class="paragraph">
<p>By default, Krazo uses a URL re-write mechanism to store the information about <code>@RedirectScoped</code> beans.
In case someone doesn&#8217;t want this behavior, Krazo also supports a cookie-based strategy for this task. To enable this feature, the property <code>org.eclipse.krazo.redirectScopeCookies</code> needs to be overwritten inside the Jakarta REST Application class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import org.eclipse.krazo.Properties;

public class MyApplication extends Application {

    @Override
    public Map&lt;String, Object&gt; getProperties() {
        final Map&lt;String, Object&gt; props = new HashSet&lt;&gt;();

        props.put(Properties.REDIRECT_SCOPE_COOKIES, true);

        return props;
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_properties_redirect_scope_cookie_name_org_eclipse_krazo_redirectscopecookiename">3.2.2. Properties.REDIRECT_SCOPE_COOKIE_NAME (org.eclipse.krazo.redirectScopeCookieName)</h4>
<div class="paragraph">
<p>When you use the <em>cookie based</em> approach to handle the redirect scope, the default cookie name is <code>org.eclipse.krazo.redirect.Cookie</code>. In case this name doesn&#8217;t match your requirements, there is a property called <code>org.eclipse.krazo.redirectScopeCookieName</code> to overwrite it. The example shows how this can be achieved.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import org.eclipse.krazo.Properties;

public class MyApplication extends Application {

    @Override
    public Map&lt;String, Object&gt; getProperties() {
        final Map&lt;String, Object&gt; props = new HashSet&lt;&gt;();

        props.put(Properties.REDIRECT_SCOPE_COOKIE_NAME, "my_redirect_cookie");

        return props;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example would let Krazo create a Cookie called <code>my_redirect_cookie</code> containing the redirect scope token.</p>
</div>
</div>
<div class="sect3">
<h4 id="_properties_redirect_scope_query_param_name_org_eclipse_krazo_redirectscopequeryparamname">3.2.3. Properties.REDIRECT_SCOPE_QUERY_PARAM_NAME (org.eclipse.krazo.redirectScopeQueryParamName)</h4>
<div class="paragraph">
<p>On the other hand, when you use the <em>query param</em> based approach, which is the default setting, you can
change the query param&#8217;s name from <code>org.eclipse.krazo.redirect.param.ScopeId</code> to something more concise by using
the property <code>org.eclipse.krazo.redirectScopeQueryParamName</code>. The example shows to how this can be done inside the
Jakarta REST application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import org.eclipse.krazo.Properties;

public class MyApplication extends Application {

    @Override
    public Map&lt;String, Object&gt; getProperties() {
        final Map&lt;String, Object&gt; props = new HashSet&lt;&gt;();

        props.put(Properties.REDIRECT_SCOPE_QUERY_PARAM_NAME, "redirect_token");

        return props;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now the query param would be something like <code>/foo?redirect_token=[some UUID]</code> instead of <code>/foo?org.eclipse.krazo.redirect.param.ScopeId=[some UUID]</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_properties_default_view_file_extension_org_eclipse_krazo_defaultviewfileextension">3.2.4. Properties.DEFAULT_VIEW_FILE_EXTENSION (org.eclipse.krazo.defaultViewFileExtension)</h4>
<div class="paragraph">
<p>While developing a completely new MVC application, someone normally just uses one template engine for all of its views.
This means, that every view file ends with the same extension and this leads to less readable code.
To set this extension as a default for all view files, Krazo provides the property
<code>org.eclipse.krazo.defaultViewFileExtension</code>, which takes a string containing the name of the file extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import org.eclipse.krazo.Properties;

public class MyApplication extends Application {

    @Override
    public Map&lt;String, Object&gt; getProperties() {
        final Map&lt;String, Object&gt; props = new HashSet&lt;&gt;();

        props.put(Properties.DEFAULT_VIEW_FILE_EXTENSION, "jsp");

        return props;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, Krazo will assume that every view is a JSP file.
So in case you return the view <code>edit</code> from your Controller, Krazo will search for a file <code>edit.jsp</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_view_engines">4. View Engines</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Eclipse Krazo contains two view engine implementation out of the box: JSP and JSF. Those are required by the specification and will be shortly be introduced in this chapter.</p>
</div>
<div class="paragraph">
<p>In case you search for view engines not covered by the specification, please have a look into the <a href="https://github.com/eclipse-ee4j/krazo-extensions" target="_blank" rel="noopener">Krazo Extensions repository</a>. There you&#8217;ll find implementations for
Thymeleaf, Freemarker and many more.</p>
</div>
<div class="paragraph">
<p>Anyway, if you want to implement your own custom view engine, please refer to the chapter <a href="_extensions.adoc#_writing_extensions">Writing extensions</a> covered later in this document.</p>
</div>
<div class="sect2">
<h3 id="_jsp_view_engine">4.1. JSP view engine</h3>
<div class="paragraph">
<p>The MVC specification requires implementations to provide a view engine using JSP as template language. To use this
view engine you&#8217;ve nothing more to do as adding a JSP ending on <code>.jsp</code> or <code>.jspx</code> into the configured view directory
and call it from the controller.</p>
</div>
</div>
<div class="sect2">
<h3 id="_jsf_view_engine">4.2. JSF view engine</h3>
<div class="paragraph">
<p>The JSF view engine is, as well as the JSP engine, required to be part of an MVC specification compatible implementation.
This view engine enables you to use Facelets as template language. To use this language, your server needs to provide a JSF
implementation and your template needs to end on <code>.xhtml</code>.</p>
</div>
<div class="paragraph">
<p>Please be aware of the fact, that some features known from JSF won&#8217;t work. This is due to the fact, that JSF and Jakarta MVC follow different architectural approaches. Also this view engine is discussed to be removed, or at least going to
be optional, in Jakarta MVC 3.0.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced_features">5. Advanced Features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes features which are built for advanced use-cases.</p>
</div>
<div class="sect2">
<h3 id="_overwrite_http_method_in_form_submissions">5.1. Overwrite HTTP method in form submissions</h3>
<div class="paragraph">
<p>There are architectural approaches which use the power of HTTP verbs for processing views.</p>
</div>
<div class="paragraph">
<p>For example, the update of a resource can be performed by a <code>PUT</code> or <code>PATCH</code> request.
Unfortunately, the HTML specification doesn&#8217;t support <code>PUT</code>, <code>PATCH</code> or <code>DELETE</code> as valid methods for forms.
To bypass the lack of this possibility, Krazo provides the <a href="https://github.com/eclipse-ee4j/krazo/blob/master/core/src/main/java/org/eclipse/krazo/forms/FormMethodOverwriteFilter.java"><code>org.eclipse.krazo.forms.FormMethodOverwriteFilter</code></a>, whose functionality got specified in Jakarta MVC 2.1.
This filter enables users to override the <code>POST</code> method for form actions by setting an hidden input field, so they can target resources mapped to the supported HTTP verbs <code>PUT</code>, <code>PATCH</code> or <code>DELETE</code>.</p>
</div>
<div class="paragraph">
<p>The form method overwrite is enabled per default, which means overwriting a form&#8217;s method is supported out of the box.</p>
</div>
<div class="paragraph">
<p>The following example shows the code of a form, which performs some <code>DELETE</code> request on a resource:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">&lt;form action="/foobar/123" method="POST"&gt;
  &lt;!-- Use the hidden '_method' input for overriding the 'POST'  --&gt;
  &lt;input name="_method" type="hidden" value="DELETE"&gt;

  &lt;input type="submit" name="submit" value="Submit"/&gt;
&lt;/form&gt;</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_migrating_from_legacy_org_eclipse_krazo_forms_hiddenmethodfilter_to_org_eclipse_krazo_forms_formmethodoverwritefilter">5.1.1. Migrating from legacy <code>org.eclipse.krazo.forms.HiddenMethodFilter</code> to <code>org.eclipse.krazo.forms.FormMethodOverwriteFilter</code></h4>
<div class="paragraph">
<p>The migration from the legacy <code>org.eclipse.krazo.forms.HiddenMethodFilter</code> is simple.</p>
</div>
<div class="paragraph">
<p>If the form method overwrite was activated by setting <code>Properties.HIDDEN_METHOD_FILTER_ACTIVE</code> to <code>true</code>, nothing but removing this line has to be done. The form method overwrite functionality is enabled per default since Jakarta MVC 2.1.</p>
</div>
<div class="paragraph">
<p>If the form method overwrite has to be disabled to achieve the legacy default behavior, the property <code>jakarta.mvc.form.FormMethodOverwrite</code> has to be set to <code>jakarta.mvc.form.FormMethodOverwriter.Options#DISABLED</code> inside the Jakarta REST application.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_writing_extensions">6. Writing Extensions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter explains, what steps need to be taken to extend Krazo&#8217;s functionality. This may be additional
configurations, type converters or whole view engines.</p>
</div>
<div class="paragraph">
<p>Most of those SPIs (Service Provider Interfaces) are handled by Java&#8217;s <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ServiceLoader.html">ServiceLoader</a> mechanism. Please read its documentation before you start to implement Krazo extensions.</p>
</div>
<div class="sect2">
<h3 id="_add_type_converters">6.1. Add type converters</h3>
<div class="paragraph">
<p>Eclipse Krazo provides its own implementation of Jakarta RESTs <code>ParamConverterProvider</code>, so the <code>BindingResult</code> can be filled in case of an incompatible mapping between the request&#8217;s and target&#8217;s type.
You can add custom implementations of <code>org.eclipse.krazo.binding.convert.MvcConverter</code> and register them as a service, so it can be picked up by the <code>org.eclipse.krazo.binding.convert.ConverterRegistry</code>. Converts can be prioritized by the <code>@Priority</code> annotation. The default priority of all embedded <code>MvcConverter</code> implementations is <code>0 (zero)</code>.</p>
</div>
<div class="paragraph">
<p>You can find an example for adding a new <code>MvcConverter</code> in the <a href="https://github.com/eclipse-ee4j/krazo/blob/master/testsuite/src/test/java/org/eclipse/krazo/test/convert/ConverterPriorityIT.java">ConverterPriorityIT</a>. Please note, that the service registration is <a href="https://github.com/eclipse-ee4j/krazo/blob/ad02db7cc262bd40275045528113ccb42c088b47/testsuite/src/test/java/org/eclipse/krazo/test/convert/ConverterPriorityIT.java#L39">handled by
Arquillian</a> in this case.</p>
</div>
</div>
<div class="sect2">
<h3 id="_add_features_to_jakarta_restful_web_services">6.2. Add features to Jakarta RESTful Web Services</h3>
<div class="paragraph">
<p>To be usable on top of Jakarta REST, Eclipse Krazo uses a lot of Jakarta REST APIs. One of them is the <code>FeatureContext</code> which is used to register providers, filters etc. The core classes of Krazo are registered there too, which is made possible by the <code>org.eclipse.krazo.bootstrap.ConfigProvider</code> interface. This interface needs to be implemented in case an extension wants to add additional behavior to Krazo and registered as a service. Then, on application startup, all <code>ConfigProvider</code> implementations are fetched by <code>org.eclipse.krazo.bootstrap.Initializer</code> and registered in Jakarta REST.</p>
</div>
<div class="paragraph">
<p>The <code>ConfigProvider</code> implementations for <a href="https://github.com/eclipse-ee4j/krazo/blob/master/jersey/src/main/java/org/eclipse/krazo/jersey/bootstrap/JerseyConfigProvider.java">krazo-jersey</a> and <a href="https://github.com/eclipse-ee4j/krazo/blob/master/resteasy/src/main/java/org/eclipse/krazo/resteasy/bootstrap/RestEasyConfigProvider.java">krazo-resteasy</a> are good example for the usage of this SPI.</p>
</div>
</div>
<div class="sect2">
<h3 id="_unwrap_http_communication_for_different_servers">6.3. Unwrap HTTP communication for different servers</h3>
<div class="paragraph">
<p>As there is more than one implementation of Jakarta REST, there may be different behaviors when it comes to
request and response handling. Some implementations wrap the original <code>HttpServletRequest</code> and / or <code>HttpServletResponse</code> which makes it hard to work on the specified API. Eclipse Krazo provides an SPI which
makes it possible to unwrap such non-standard behavior, namely the <code>org.eclipse.krazo.core.HttpCommunicationUnwrapper</code>. This interface can be used to unwrap incoming requests an responses so Krazo can handle them.</p>
</div>
<div class="paragraph">
<p>One real-world example on how this interface can be used is the <a href="https://github.com/eclipse-ee4j/krazo/blob/master/resteasy/src/main/java/org/eclipse/krazo/resteasy/core/LibertyHttpCommunicationUnwrapper.java">LibertyHttpCommunicationUnwrapper</a> used to normalize the request coming from OpenLiberty.</p>
</div>
</div>
<div class="sect2">
<h3 id="_custom_behavior_for_form_handling_during_csrf_validation">6.4. Custom behavior for form handling during CSRF validation</h3>
<div class="paragraph">
<p>To be able to receive the CSRF token from HTML forms, an implementation of the <code>org.eclipse.krazo.security.FormEntityProvider</code> is required. At the moment, only the content type <code>application/x-www-form-urlencoded</code> is supported. Anyway, sometimes there is different behavior between Jakarta REST implementations or their integration into application servers, so a custom <code>FormEntityProvider</code> is required. Those custom implementations need to be registered as service.</p>
</div>
<div class="paragraph">
<p>To give you an example implementation, you can have a look into <a href="https://github.com/eclipse-ee4j/krazo/blob/master/resteasy/src/main/java/org/eclipse/krazo/resteasy/security/RestEasyFormEntityProvider.java">org.eclipse.krazo.resteasy.security.RestEasyFormEntityProvider</a> to see how
this provider can be used to handle the behavior of RESTEasy forms.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_your_own_view_engine">6.5. Creating your own view engine</h3>
<div class="paragraph">
<p>The last extension point is more or less one single interface you need to know when you want to add a custom view engine. To have a real-world example the <a href="https://github.com/eclipse-ee4j/krazo-extensions/tree/main/freemarker/src/main/java/org/eclipse/krazo/ext/freemarker">Krazo Freemarker extension</a> will be described. This one is chosen because it requires the minimum amount of configuration. More advanced example can be found e. g. in the <a href="https://github.com/eclipse-ee4j/krazo-extensions/tree/main/thymeleaf">Krazo Thymeleaf extension</a>.</p>
</div>
<div class="paragraph">
<p>A view engine is in most of the cases just an implementation of the <code>jakarta.mvc.engine.ViewEngine</code> interface which
contains the following two methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>boolean supports(String view)</code></p>
</li>
<li>
<p><code>void processView(ViewEngineContext context)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So a view engine requires to return which views are supported, which is done by checking them for specific file suffixes. The <a href="https://github.com/eclipse-ee4j/krazo-extensions/blob/main/freemarker/src/main/java/org/eclipse/krazo/ext/freemarker/FreemarkerViewEngine.java">FreemarkerViewEngine</a> for example is triggered, when a view ends on <code>.ftl</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
@Priority(ViewEngine.PRIORITY_FRAMEWORK)
public class FreemarkerViewEngine extends ViewEngineBase {

    @Override
    public boolean supports(String view) {
        return view.endsWith(".ftl");
    }

    //...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And in case the view engine is identified as engine-to-use for the current view, it needs to get processed. This is done inside the <code>processView</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
@Priority(ViewEngine.PRIORITY_FRAMEWORK)
public class FreemarkerViewEngine extends ViewEngineBase {

    @Inject
    @ViewEngineConfig
    private Configuration configuration;

	//...

    @Override
    public void processView(ViewEngineContext context) throws ViewEngineException {

        Charset charset = resolveCharsetAndSetContentType(context);

        try (Writer writer = new OutputStreamWriter(context.getOutputStream(), charset)) {

            Template template = configuration.getTemplate(resolveView(context));

            Map&lt;String, Object&gt; model = new HashMap&lt;&gt;(context.getModels().asMap());
            model.put("request", context.getRequest(HttpServletRequest.class));

            template.process(model, writer);

        } catch (TemplateException | IOException e) {
            throw new ViewEngineException(e);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, there&#8217;s no magic inside. The charset of the view is resolved, which is done by the abstract <code>ViewEngineBase</code> class that implements the <code>ViewEngine</code> interface and the template loaded via the <code>Configuration</code> class. The <code>Configuration</code> class is a FreeMarker API that is produced in the bean <a href="https://github.com/eclipse-ee4j/krazo-extensions/blob/main/freemarker/src/main/java/org/eclipse/krazo/ext/freemarker/DefaultConfigurationProducer.java">DefaultConfigurationProducer</a> and injected by CDI. Afterwards, the model is migrated into the type FreeMarker expects as its model and the template gets processed.</p>
</div>
<div class="paragraph">
<p>Concluding this topic, as you can see creating an own Krazo view engine is not hard from Krazo&#8217;s point of view and the <code>ViewEngine</code> interface provides everything you need to get started.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>